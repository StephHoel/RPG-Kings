(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64485,15823,19273,75555,40143,14448,86491,12598,45685,14272,85835,15873,74478,18240,53680,63321,21606,36432,t=>{"use strict";let e,s,i,r,n,a,o;t.s([],64485);let u=()=>["saves","active"],c=()=>["saves"];t.s(["useActiveSave",()=>tl],45685);var h=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};t.s(["Subscribable",()=>h],15823),t.i(47167);var l={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},d=new class{#t=l;#e=!1;setTimeoutProvider(t){this.#t=t}setTimeout(t,e){return this.#t.setTimeout(t,e)}clearTimeout(t){this.#t.clearTimeout(t)}setInterval(t,e){return this.#t.setInterval(t,e)}clearInterval(t){this.#t.clearInterval(t)}},p="undefined"==typeof window||"Deno"in globalThis;function f(){}function y(t,e){return"function"==typeof t?t(e):t}function m(t){return"number"==typeof t&&t>=0&&t!==1/0}function v(t,e){return Math.max(t+(e||0)-Date.now(),0)}function b(t,e){return"function"==typeof t?t(e):t}function g(t,e){return"function"==typeof t?t(e):t}function R(t,e){let{type:s="all",exact:i,fetchStatus:r,predicate:n,queryKey:a,stale:o}=t;if(a){if(i){if(e.queryHash!==w(a,e.options))return!1}else if(!O(e.queryKey,a))return!1}if("all"!==s){let t=e.isActive();if("active"===s&&!t||"inactive"===s&&t)return!1}return("boolean"!=typeof o||e.isStale()===o)&&(!r||r===e.state.fetchStatus)&&(!n||!!n(e))}function S(t,e){let{exact:s,status:i,predicate:r,mutationKey:n}=t;if(n){if(!e.options.mutationKey)return!1;if(s){if(T(e.options.mutationKey)!==T(n))return!1}else if(!O(e.options.mutationKey,n))return!1}return(!i||e.state.status===i)&&(!r||!!r(e))}function w(t,e){return(e?.queryKeyHashFn||T)(t)}function T(t){return JSON.stringify(t,(t,e)=>F(e)?Object.keys(e).sort().reduce((t,s)=>(t[s]=e[s],t),{}):e)}function O(t,e){return t===e||typeof t==typeof e&&!!t&&!!e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).every(s=>O(t[s],e[s]))}var C=Object.prototype.hasOwnProperty;function E(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(let s in t)if(t[s]!==e[s])return!1;return!0}function Q(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function F(t){if(!I(t))return!1;let e=t.constructor;if(void 0===e)return!0;let s=e.prototype;return!!I(s)&&!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype}function I(t){return"[object Object]"===Object.prototype.toString.call(t)}function q(t){return new Promise(e=>{d.setTimeout(e,t)})}function x(t,e,s){return"function"==typeof s.structuralSharing?s.structuralSharing(t,e):!1!==s.structuralSharing?function t(e,s){if(e===s)return e;let i=Q(e)&&Q(s);if(!i&&!(F(e)&&F(s)))return s;let r=(i?e:Object.keys(e)).length,n=i?s:Object.keys(s),a=n.length,o=i?Array(a):{},u=0;for(let c=0;c<a;c++){let a=i?c:n[c],h=e[a],l=s[a];if(h===l){o[a]=h,(i?c<r:C.call(e,a))&&u++;continue}if(null===h||null===l||"object"!=typeof h||"object"!=typeof l){o[a]=l;continue}let d=t(h,l);o[a]=d,d===h&&u++}return r===a&&u===r?e:o}(t,e):e}function M(t,e,s=0){let i=[...t,e];return s&&i.length>s?i.slice(1):i}function P(t,e,s=0){let i=[e,...t];return s&&i.length>s?i.slice(0,-1):i}var _=Symbol();function A(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:t.queryFn&&t.queryFn!==_?t.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${t.queryHash}'`))}function U(t,e){return"function"==typeof t?t(...e):!!t}t.s(["addToEnd",()=>M,"addToStart",()=>P,"ensureQueryFn",()=>A,"functionalUpdate",()=>y,"hashKey",()=>T,"hashQueryKeyByOptions",()=>w,"isServer",()=>p,"isValidTimeout",()=>m,"matchMutation",()=>S,"matchQuery",()=>R,"noop",()=>f,"partialMatchKey",()=>O,"replaceData",()=>x,"resolveEnabled",()=>g,"resolveStaleTime",()=>b,"shallowEqualObjects",()=>E,"shouldThrowError",()=>U,"skipToken",()=>_,"sleep",()=>q,"timeUntilStale",()=>v],19273);var D=new class extends h{#s;#i;#r;constructor(){super(),this.#r=t=>{if(!p&&window.addEventListener){let e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#i||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(t){this.#r=t,this.#i?.(),this.#i=t(t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()})}setFocused(t){this.#s!==t&&(this.#s=t,this.onFocus())}onFocus(){let t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return"boolean"==typeof this.#s?this.#s:globalThis.document?.visibilityState!=="hidden"}};t.s(["focusManager",()=>D],75555);var k=(e=[],s=0,i=t=>{t()},r=t=>{t()},n=function(t){setTimeout(t,0)},{batch:t=>{let a;s++;try{a=t()}finally{let t;--s||(t=e,e=[],t.length&&n(()=>{r(()=>{t.forEach(t=>{i(t)})})}))}return a},batchCalls:t=>(...e)=>{a(()=>{t(...e)})},schedule:a=t=>{s?e.push(t):n(()=>{i(t)})},setNotifyFunction:t=>{i=t},setBatchNotifyFunction:t=>{r=t},setScheduler:t=>{n=t}});t.s(["notifyManager",()=>k],40143);var j=new class extends h{#n=!0;#i;#r;constructor(){super(),this.#r=t=>{if(!p&&window.addEventListener){let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#i||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(t){this.#r=t,this.#i?.(),this.#i=t(this.setOnline.bind(this))}setOnline(t){this.#n!==t&&(this.#n=t,this.listeners.forEach(e=>{e(t)}))}isOnline(){return this.#n}};function K(){let t,e,s=new Promise((s,i)=>{t=s,e=i});function i(t){Object.assign(s,t),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=e=>{i({status:"fulfilled",value:e}),t(e)},s.reject=t=>{i({status:"rejected",reason:t}),e(t)},s}function L(t){return Math.min(1e3*2**t,3e4)}function G(t){return(t??"online")!=="online"||j.isOnline()}t.s(["onlineManager",()=>j],14448);var H=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function W(t){let e,s=!1,i=0,r=K(),n=()=>D.isFocused()&&("always"===t.networkMode||j.isOnline())&&t.canRun(),a=()=>G(t.networkMode)&&t.canRun(),o=t=>{"pending"===r.status&&(e?.(),r.resolve(t))},u=t=>{"pending"===r.status&&(e?.(),r.reject(t))},c=()=>new Promise(s=>{e=t=>{("pending"!==r.status||n())&&s(t)},t.onPause?.()}).then(()=>{e=void 0,"pending"===r.status&&t.onContinue?.()}),h=()=>{let e;if("pending"!==r.status)return;let a=0===i?t.initialPromise:void 0;try{e=a??t.fn()}catch(t){e=Promise.reject(t)}Promise.resolve(e).then(o).catch(e=>{if("pending"!==r.status)return;let a=t.retry??3*!p,o=t.retryDelay??L,l="function"==typeof o?o(i,e):o,d=!0===a||"number"==typeof a&&i<a||"function"==typeof a&&a(i,e);s||!d?u(e):(i++,t.onFail?.(i,e),q(l).then(()=>n()?void 0:c()).then(()=>{s?u(e):h()}))})};return{promise:r,status:()=>r.status,cancel:e=>{if("pending"===r.status){let s=new H(e);u(s),t.onCancel?.(s)}},continue:()=>(e?.(),r),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:a,start:()=>(a()?h():c().then(h),r)}}var B=class{#a;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),m(this.gcTime)&&(this.#a=d.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(p?1/0:3e5))}clearGcTimeout(){this.#a&&(d.clearTimeout(this.#a),this.#a=void 0)}},N=class extends B{#o;#u;#c;#h;#l;#d;#p;constructor(t){super(),this.#p=!1,this.#d=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#h=t.client,this.#c=this.#h.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#o=V(this.options),this.state=t.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#l?.promise}setOptions(t){if(this.options={...this.#d,...t},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let t=V(this.options);void 0!==t.data&&(this.setState(z(t.data,t.dataUpdatedAt)),this.#o=t)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#c.remove(this)}setData(t,e){let s=x(this.state.data,t,this.options);return this.#f({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#f({type:"setState",state:t,setStateOptions:e})}cancel(t){let e=this.#l?.promise;return this.#l?.cancel(t),e?e.then(f).catch(f):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(t=>!1!==g(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===b(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(t=0){return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!v(this.state.dataUpdatedAt,t))}onFocus(){let t=this.observers.find(t=>t.shouldFetchOnWindowFocus());t?.refetch({cancelRefetch:!1}),this.#l?.continue()}onOnline(){let t=this.observers.find(t=>t.shouldFetchOnReconnect());t?.refetch({cancelRefetch:!1}),this.#l?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#c.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#l&&(this.#p?this.#l.cancel({revert:!0}):this.#l.cancelRetry()),this.scheduleGc()),this.#c.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#f({type:"invalidate"})}async fetch(t,e){let s;if("idle"!==this.state.fetchStatus&&this.#l?.status()!=="rejected"){if(void 0!==this.state.data&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#l)return this.#l.continueRetry(),this.#l.promise}if(t&&this.setOptions(t),!this.options.queryFn){let t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}let i=new AbortController,r=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#p=!0,i.signal)})},n=()=>{let t,s=A(this.options,e),i=(r(t={client:this.#h,queryKey:this.queryKey,meta:this.meta}),t);return(this.#p=!1,this.options.persister)?this.options.persister(s,i,this):s(i)},a=(r(s={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#h,state:this.state,fetchFn:n}),s);this.options.behavior?.onFetch(a,this),this.#u=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#f({type:"fetch",meta:a.fetchOptions?.meta}),this.#l=W({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:t=>{t instanceof H&&t.revert&&this.setState({...this.#u,fetchStatus:"idle"}),i.abort()},onFail:(t,e)=>{this.#f({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#f({type:"pause"})},onContinue:()=>{this.#f({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{let t=await this.#l.start();if(void 0===t)throw Error(`${this.queryHash} data is undefined`);return this.setData(t),this.#c.config.onSuccess?.(t,this),this.#c.config.onSettled?.(t,this.state.error,this),t}catch(t){if(t instanceof H){if(t.silent)return this.#l.promise;else if(t.revert){if(void 0===this.state.data)throw t;return this.state.data}}throw this.#f({type:"error",error:t}),this.#c.config.onError?.(t,this),this.#c.config.onSettled?.(this.state.data,t,this),t}finally{this.scheduleGc()}}#f(t){let e=e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...$(e.data,this.options),fetchMeta:t.meta??null};case"success":let s={...e,...z(t.data,t.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#u=t.manual?s:void 0,s;case"error":let i=t.error;return{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}};this.state=e(this.state),k.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#c.notify({query:this,type:"updated",action:t})})}};function $(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:G(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}function z(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function V(t){let e="function"==typeof t.initialData?t.initialData():t.initialData,s=void 0!==e,i=s?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}t.s(["Query",()=>N,"fetchState",()=>$],86491);var J=class extends h{constructor(t,e){super(),this.options=e,this.#h=t,this.#y=null,this.#m=K(),this.bindMethods(),this.setOptions(e)}#h;#v=void 0;#b=void 0;#g=void 0;#R;#S;#m;#y;#w;#T;#O;#C;#E;#Q;#F=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#v.addObserver(this),X(this.#v,this.options)?this.#I():this.updateResult(),this.#q())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Y(this.#v,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Y(this.#v,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#M(),this.#v.removeObserver(this)}setOptions(t){let e=this.options,s=this.#v;if(this.options=this.#h.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof g(this.options.enabled,this.#v))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#P(),this.#v.setOptions(this.options),e._defaulted&&!E(this.options,e)&&this.#h.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#v,observer:this});let i=this.hasListeners();i&&Z(this.#v,s,this.options,e)&&this.#I(),this.updateResult(),i&&(this.#v!==s||g(this.options.enabled,this.#v)!==g(e.enabled,this.#v)||b(this.options.staleTime,this.#v)!==b(e.staleTime,this.#v))&&this.#_();let r=this.#A();i&&(this.#v!==s||g(this.options.enabled,this.#v)!==g(e.enabled,this.#v)||r!==this.#Q)&&this.#U(r)}getOptimisticResult(t){var e,s;let i=this.#h.getQueryCache().build(this.#h,t),r=this.createResult(i,t);return e=this,s=r,E(e.getCurrentResult(),s)||(this.#g=r,this.#S=this.options,this.#R=this.#v.state),r}getCurrentResult(){return this.#g}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),e?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#m.status||this.#m.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,s))})}trackProp(t){this.#F.add(t)}getCurrentQuery(){return this.#v}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){let e=this.#h.defaultQueryOptions(t),s=this.#h.getQueryCache().build(this.#h,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#I({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#g))}#I(t){this.#P();let e=this.#v.fetch(this.options,t);return t?.throwOnError||(e=e.catch(f)),e}#_(){this.#x();let t=b(this.options.staleTime,this.#v);if(p||this.#g.isStale||!m(t))return;let e=v(this.#g.dataUpdatedAt,t);this.#C=d.setTimeout(()=>{this.#g.isStale||this.updateResult()},e+1)}#A(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#v):this.options.refetchInterval)??!1}#U(t){this.#M(),this.#Q=t,!p&&!1!==g(this.options.enabled,this.#v)&&m(this.#Q)&&0!==this.#Q&&(this.#E=d.setInterval(()=>{(this.options.refetchIntervalInBackground||D.isFocused())&&this.#I()},this.#Q))}#q(){this.#_(),this.#U(this.#A())}#x(){this.#C&&(d.clearTimeout(this.#C),this.#C=void 0)}#M(){this.#E&&(d.clearInterval(this.#E),this.#E=void 0)}createResult(t,e){let s,i=this.#v,r=this.options,n=this.#g,a=this.#R,o=this.#S,u=t!==i?t.state:this.#b,{state:c}=t,h={...c},l=!1;if(e._optimisticResults){let s=this.hasListeners(),n=!s&&X(t,e),a=s&&Z(t,i,e,r);(n||a)&&(h={...h,...$(c.data,t.options)}),"isRestoring"===e._optimisticResults&&(h.fetchStatus="idle")}let{error:d,errorUpdatedAt:p,status:f}=h;s=h.data;let y=!1;if(void 0!==e.placeholderData&&void 0===s&&"pending"===f){let t;n?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(t=n.data,y=!0):t="function"==typeof e.placeholderData?e.placeholderData(this.#O?.state.data,this.#O):e.placeholderData,void 0!==t&&(f="success",s=x(n?.data,t,e),l=!0)}if(e.select&&void 0!==s&&!y)if(n&&s===a?.data&&e.select===this.#w)s=this.#T;else try{this.#w=e.select,s=e.select(s),s=x(n?.data,s,e),this.#T=s,this.#y=null}catch(t){this.#y=t}this.#y&&(d=this.#y,s=this.#T,p=Date.now(),f="error");let m="fetching"===h.fetchStatus,v="pending"===f,b="error"===f,R=v&&m,S=void 0!==s,w={status:f,fetchStatus:h.fetchStatus,isPending:v,isSuccess:"success"===f,isError:b,isInitialLoading:R,isLoading:R,data:s,dataUpdatedAt:h.dataUpdatedAt,error:d,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!v,isLoadingError:b&&!S,isPaused:"paused"===h.fetchStatus,isPlaceholderData:l,isRefetchError:b&&S,isStale:tt(t,e),refetch:this.refetch,promise:this.#m,isEnabled:!1!==g(e.enabled,t)};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===w.status?t.reject(w.error):void 0!==w.data&&t.resolve(w.data)},s=()=>{e(this.#m=w.promise=K())},r=this.#m;switch(r.status){case"pending":t.queryHash===i.queryHash&&e(r);break;case"fulfilled":("error"===w.status||w.data!==r.value)&&s();break;case"rejected":("error"!==w.status||w.error!==r.reason)&&s()}}return w}updateResult(){let t=this.#g,e=this.createResult(this.#v,this.options);if(this.#R=this.#v.state,this.#S=this.options,void 0!==this.#R.data&&(this.#O=this.#v),E(e,t))return;this.#g=e;let s=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#F.size)return!0;let i=new Set(s??this.#F);return this.options.throwOnError&&i.add("error"),Object.keys(this.#g).some(e=>this.#g[e]!==t[e]&&i.has(e))};this.#D({listeners:s()})}#P(){let t=this.#h.getQueryCache().build(this.#h,this.options);if(t===this.#v)return;let e=this.#v;this.#v=t,this.#b=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#q()}#D(t){k.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(this.#g)}),this.#h.getQueryCache().notify({query:this.#v,type:"observerResultsUpdated"})})}};function X(t,e){return!1!==g(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&Y(t,e,e.refetchOnMount)}function Y(t,e,s){if(!1!==g(e.enabled,t)&&"static"!==b(e.staleTime,t)){let i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&tt(t,e)}return!1}function Z(t,e,s,i){return(t!==e||!1===g(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&tt(t,s)}function tt(t,e){return!1!==g(e.enabled,t)&&t.isStaleByTime(b(e.staleTime,t))}var te=t.i(71645),ts=t.i(43476),ti=te.createContext(void 0),tr=t=>{let e=te.useContext(ti);if(t)return t;if(!e)throw Error("No QueryClient set, use QueryClientProvider to set one");return e},tn=({client:t,children:e})=>(te.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,ts.jsx)(ti.Provider,{value:t,children:e}));t.s(["QueryClientProvider",()=>tn,"useQueryClient",()=>tr],12598);var ta=te.createContext((o=!1,{clearReset:()=>{o=!1},reset:()=>{o=!0},isReset:()=>o})),to=te.createContext(!1);to.Provider;var tu=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function tc(t,e){return function(t,e,s){let i=te.useContext(to),r=te.useContext(ta),n=tr(s),a=n.defaultQueryOptions(t);if(n.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=i?"isRestoring":"optimistic",a.suspense){let t=t=>"static"===t?t:Math.max(t??1e3,1e3),e=a.staleTime;a.staleTime="function"==typeof e?(...s)=>t(e(...s)):t(e),"number"==typeof a.gcTime&&(a.gcTime=Math.max(a.gcTime,1e3))}(a.suspense||a.throwOnError||a.experimental_prefetchInRender)&&!r.isReset()&&(a.retryOnMount=!1),te.useEffect(()=>{r.clearReset()},[r]);let o=!n.getQueryCache().get(a.queryHash),[u]=te.useState(()=>new e(n,a)),c=u.getOptimisticResult(a),h=!i&&!1!==t.subscribed;if(te.useSyncExternalStore(te.useCallback(t=>{let e=h?u.subscribe(k.batchCalls(t)):f;return u.updateResult(),e},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),te.useEffect(()=>{u.setOptions(a)},[a,u]),a?.suspense&&c.isPending)throw tu(a,u,r);if((({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(r&&void 0===t.data||U(s,[t.error,i])))({result:c,errorResetBoundary:r,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(a,c),a.experimental_prefetchInRender&&!p&&c.isLoading&&c.isFetching&&!i){let t=o?tu(a,u,r):n.getQueryCache().get(a.queryHash)?.promise;t?.catch(f).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?c:u.trackResult(c)}(t,J,e)}t.i(94467);var th=t.i(23259);function tl(){let{data:t,isLoading:e,error:s}=tc({queryKey:u(),staleTime:36e5,queryFn:async()=>await th.db.saves.filter(t=>t?.isActive===!0).first()??null});return{activeSaveId:t?.id??null,isLoading:e,error:s}}t.s(["useCreateSave",()=>tv],85835);let td=(t=21)=>{let e="",s=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[t]];return e};var tp=class extends B{#h;#k;#j;#l;constructor(t){super(),this.#h=t.client,this.mutationId=t.mutationId,this.#j=t.mutationCache,this.#k=[],this.state=t.state||tf(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#k.includes(t)||(this.#k.push(t),this.clearGcTimeout(),this.#j.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#k=this.#k.filter(e=>e!==t),this.scheduleGc(),this.#j.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#k.length||("pending"===this.state.status?this.scheduleGc():this.#j.remove(this))}continue(){return this.#l?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#f({type:"continue"})},s={client:this.#h,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#l=W({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#f({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#f({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#j.canRun(this)});let i="pending"===this.state.status,r=!this.#l.canStart();try{if(i)e();else{this.#f({type:"pending",variables:t,isPaused:r}),await this.#j.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#f({type:"pending",context:e,variables:t,isPaused:r})}let n=await this.#l.start();return await this.#j.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#j.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#f({type:"success",data:n}),n}catch(e){try{throw await this.#j.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#j.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#f({type:"error",error:e})}}finally{this.#j.runNext(this)}}#f(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),k.batch(()=>{this.#k.forEach(e=>{e.onMutationUpdate(t)}),this.#j.notify({mutation:this,type:"updated",action:t})})}};function tf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}t.s(["Mutation",()=>tp,"getDefaultState",()=>tf],14272);var ty=class extends h{#h;#g=void 0;#K;#L;constructor(t,e){super(),this.#h=t,this.setOptions(e),this.bindMethods(),this.#G()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#h.defaultMutationOptions(t),E(this.options,e)||this.#h.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#K,observer:this}),e?.mutationKey&&this.options.mutationKey&&T(e.mutationKey)!==T(this.options.mutationKey)?this.reset():this.#K?.state.status==="pending"&&this.#K.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#K?.removeObserver(this)}onMutationUpdate(t){this.#G(),this.#D(t)}getCurrentResult(){return this.#g}reset(){this.#K?.removeObserver(this),this.#K=void 0,this.#G(),this.#D()}mutate(t,e){return this.#L=e,this.#K?.removeObserver(this),this.#K=this.#h.getMutationCache().build(this.#h,this.options),this.#K.addObserver(this),this.#K.execute(t)}#G(){let t=this.#K?.state??tf();this.#g={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#D(t){k.batch(()=>{if(this.#L&&this.hasListeners()){let e=this.#g.variables,s=this.#g.context,i={client:this.#h,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#L.onSuccess?.(t.data,e,s,i),this.#L.onSettled?.(t.data,null,e,s,i)):t?.type==="error"&&(this.#L.onError?.(t.error,e,s,i),this.#L.onSettled?.(void 0,t.error,e,s,i))}this.listeners.forEach(t=>{t(this.#g)})})}};function tm(t,e){let s=tr(e),[i]=te.useState(()=>new ty(s,t));te.useEffect(()=>{i.setOptions(t)},[i,t]);let r=te.useSyncExternalStore(te.useCallback(t=>i.subscribe(k.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=te.useCallback((t,e)=>{i.mutate(t,e).catch(f)},[i]);if(r.error&&U(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:n,mutateAsync:r.mutate}}function tv(){let t=tr();return tm({mutationFn:async t=>(await th.db.saves.toCollection().modify({isActive:!1}),await th.db.saves.add({id:td(10),name:t||"Novo personagem",isActive:!0,currentWeek:1,currentDay:"Monday",currentHour:8})),onMutate:async e=>{await t.cancelQueries({queryKey:u()});let s=t.getQueryData(u()),i={id:"temp:"+td(6),name:e||"Novo personagem",isActive:!0,currentWeek:1,currentDay:"Monday",currentHour:8};return t.setQueryData(u(),i),{previousActive:s}},onError:(e,s,i)=>{i?.previousActive!==void 0&&t.setQueryData(u(),i.previousActive)},onSettled:async()=>{t.refetchQueries({queryKey:u()}),t.refetchQueries({queryKey:c()})}})}function tb(){let t=tr();return tm({mutationFn:async t=>{await th.db.saves.delete(t)},onSettled:()=>{t.invalidateQueries({queryKey:c()}),t.refetchQueries({queryKey:c()})}})}function tg(){let{data:t}=tc({queryKey:c(),queryFn:async()=>await th.db.saves.toArray()});return t&&t.length>0?t:null}function tR(t){let{data:e}=tc({queryKey:["inventory",t],queryFn:async()=>th.db.inventory.where("saveId").equals(t).toArray(),enabled:!!t});return e&&e.length>0?e:null}function tS(t){let{data:e}=tc({queryKey:["milestones",t],queryFn:async()=>th.db.milestones.where({saveId:t}).toArray()??[],enabled:!!t});return e&&e.length>0?e:null}t.s(["useDeleteSave",()=>tb],15873),t.s(["useGetAllSaves",()=>tg],74478),t.s(["useGetInventory",()=>tR],18240),t.s(["useGetMilestones",()=>tS],53680);var tw=t.i(78612);function tT(t){let{data:e,isLoading:s}=tc({queryKey:[],enabled:!!t,staleTime:3e5,gcTime:18e5,select:t=>t??null,queryFn:async()=>{let e=await th.db.saves.get(t);if(!e)return null;let s=await th.db.timeslots.filter(t=>(0,tw.matchesRule)(e,t)).toArray();if(0===s.length)return null;let i=s[0].scenes;if(!Array.isArray(i)||0===i.length)return null;let r=i[Math.floor(Math.random()*i.length)],n=await th.db.scenes.get(r);return console.log("scene",n),n??null}});return{scene:e??null,isLoading:s}}function tO(t){let{data:e}=tc({queryKey:["sheet",t],queryFn:async()=>await th.db.sheets.get(t)??null,enabled:!!t});return e??null}t.s(["useGetScene",()=>tT],63321),t.s(["useGetSheet",()=>tO],21606),t.i(13208).MilestoneTypeEnum.enum.event;let tC=[{id:1,description:"Primeiro passo",saveId:"",type:"daily",achievedAtWeek:0,createdAt:new Date},{id:2,description:"Aluno iniciado",saveId:"",type:"event",achievedAtWeek:0,createdAt:new Date},{id:3,description:"Treinamento começou",saveId:"",type:"skill",achievedAtWeek:0,createdAt:new Date}],tE=[{id:"rule_manha_dias_uteis",weekdays:["Monday","Tuesday","Wednesday","Thursday","Friday"],hours:[8,9,10,11],scenes:["scene_manha_aula","scene_tarde_treino"]},{id:"rule_tarde",hours:[14,15,16],scenes:["scene_tarde_treino","scene_manha_aula"]},{id:"rule_noite",hours:[19,20,21],scenes:["scene_noite_social","scene_tarde_treino"]}];var tQ=t.i(38269),tF=t.i(56829);let tI=[{id:"scene_caminho_predio",title:"Caminho até o prédio principal",timeslots:[tF.TimeslotEnum.enum.morning],tags:[tQ.SceneTagEnum.enum.exploration,tQ.SceneTagEnum.enum.social],content:"Você cruza o pátio e encontra alguns colegas se arrumando para o primeiro dia.",preRequire:null},{id:"scene_primeira_aula",title:"Primeira aula do dia",timeslots:[tF.TimeslotEnum.enum.morning],tags:[tQ.SceneTagEnum.enum.study],content:"Uma explicação introdutória sobre a Academia e seus objetivos.",preRequire:{reputation:[{stock:0}]}},{id:"scene_treino_basico",title:"Treino de habilidades",timeslots:[tF.TimeslotEnum.enum.morning],tags:[tQ.SceneTagEnum.enum.training],content:"Um exercício prático para despertar sua magia interior.",preRequire:{}},{id:"scene_encontro_noturno",title:"Encontro no pátio ao anoitecer",timeslots:[tF.TimeslotEnum.enum.morning],tags:[tQ.SceneTagEnum.enum.social,tQ.SceneTagEnum.enum.exploration],content:"Conversas baixas, promessas de aventuras e segredos sussurrados.",preRequire:{items:["scene_caminho_predio"]}},{id:"scene_manha_aula",title:"Aula de Alquimia",content:"Você entra no laboratório e o cheiro de ervas toma o ar.",tags:[tQ.SceneTagEnum.enum.class],timeslots:[tF.TimeslotEnum.enum.morning]},{id:"scene_tarde_treino",title:"Treino no Pátio",content:"O sol das duas da tarde castiga enquanto você pratica.",tags:[tQ.SceneTagEnum.enum.training],timeslots:[tF.TimeslotEnum.enum.afternoon]},{id:"scene_noite_social",title:"Clube de Estratégia",content:"Um grupo se reúne para jogos táticos no salão.",tags:[tQ.SceneTagEnum.enum.social],timeslots:[tF.TimeslotEnum.enum.night]}],tq=[{id:tF.TimeslotEnum.enum.morning,scenes:[]},{id:tF.TimeslotEnum.enum.afternoon,scenes:[]},{id:tF.TimeslotEnum.enum.night,scenes:[]}],tx=[{id:"item_pocao_pequena",name:"Poção Pequena",description:"Restaura uma pequena quantidade de HP"},{id:"item_pedra_mistica",name:"Pedra Mística",description:"Material raro para alquimia"}],tM=[{id:"char_aluno_01",name:"Lina",role:"student"},{id:"char_professor_01",name:"Professor Orion",role:"teacher"}],tP=[{id:"quest_intro",title:"Primeira Prova",status:"available"}],t_=[{id:"rep_vilarejo",faction:"vilarejo",value:0}],tA=[{id:"tag_class",name:"class"},{id:"tag_training",name:"training"},{id:"tag_social",name:"social"}];t.i(6399);var tU=t.i(54598),tD=t.i(62525),tk=t.i(46696);function tj(){let t={characters:tM,items:tx,milestones:tC,quests:tP,reputations:t_,rules:tE,scenes:tI,tags:tA,timeslots:tq};return tm({mutationFn:async()=>{let e=!1;for(let[s,i]of Object.entries(t)){let t=th.db[s];if(t){if(("function"==typeof t.count?await t.count():(await t.toArray()).length)>0){tk.toast.info(`${s} j\xe1 tem dados — pulando`);continue}try{if("function"==typeof t.bulkPut)await (0,tD.safeBulkAdd)(t,i);else if("function"==typeof t.put)for(let e of i)await t.put(e);else{console.warn(`Tabela ${s} n\xe3o exp\xf5e m\xe9todos de escrita conhecidos — pulando`);continue}tk.toast.success(`Semeado ${s} (${i.length} itens)`),e=!0}catch(t){throw tk.toast.error(`Falha ao semear ${s}`),console.error(`Falha ao semear ${s}:`,t),t}}}return await (0,tU.log)("info","Seed executada (debug)"),tk.toast.success("Seed executada (debug)"),e}})}t.s(["useSeedAll",()=>tj],36432)}]);