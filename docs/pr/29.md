# Refatoração estrutural e padronização do fluxo ui→hook→service→repo→db

## Versão

- Versão (SemVer): 0.1.9
- Data: 2025-11-28

---

## Destaques

- Refatoração estrutural para reforçar o fluxo de responsabilidade: `ui > hook > service > repo > db`.
- Remoção de acessos diretos ao DB em camadas de UI (ex.: `src/pages/debug.tsx` agora utiliza serviços dedicados).
- Correções no `logger.service` (delegação de `clearLogs` para o `repo`) e consolidação de services/repositories.
- Migrações e schemas: organização das versões do Dexie, ajustes em migrations (`v3→v4`) e novos schemas Zod centralizados em `src/infra/schemas`.
- Ajustes de imports e realocação de componentes para `src/ui/*` (ex.: `@/ui/components`, `@/ui/hooks`, `@/ui/providers`).
- Melhoria em workflows do GitHub Actions (scripts mais robustos, checagens de token/gh, logging de debug).
- Adição/ajuste de testes unitários e de migração (várias suítes atualizadas para usar fake-indexeddb e mocks).
- Atualizações em templates de issue e agentes (`.github/*`) para padronização.

---

## Breaking Changes

- Estrutura de imports alterada em vários pontos (ex.: `@/components` → `@/ui/components`, `@/config` → `@/domain/routes`). Projetos ou scripts que dependam de caminhos antigos precisarão atualizar as importações.
- Mudanças no schema e nas migrações do Dexie: versões novas registradas e comportamento de upgrade modificado — isso pode afetar scripts de inicialização do DB ou ferramentas que esperam o schema antigo.
- Algumas interfaces e tipos foram reorganizados/nomes renomeados; consumidores externos (ou integrações locais) devem validar compilações e ajustar imports.

---

## Checklist

- [ ] `docs/CHANGELOG.md` atualizado com a seção desta versão.
- [ ] `package.json` atualizado (se aplicável).
- [ ] Política de versionamento seguida.

---

**Resumo (1-2 linhas):** Refatoração estrutural e correções para garantir o fluxo `ui>hook>service>repo>db`, remoção de acessos diretos ao DB em camadas de UI, e melhorias em migrações, testes e workflows.

**Commits / Notas técnicas:** revisar arquivos alterados no PR para confirmar mudanças finas em imports, nomes de exports e migrações do Dexie.

Assinatura: @StephHoel
